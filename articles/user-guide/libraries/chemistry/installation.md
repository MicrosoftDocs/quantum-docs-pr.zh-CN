---
title: Microsoft Q# 化学库安装
description: 了解如何安装 Microsoft 量程化学库，并将其与 NWChem 计算化学平台配合使用。
author: guanghaolow
ms.author: gulow
ms.date: 10/12/2018
ms.topic: article
uid: microsoft.quantum.chemistry.concepts.installation
no-loc:
- Q#
- $$v
ms.openlocfilehash: f1a7d1d041dab73980d8debc179d6c79acac6d33
ms.sourcegitcommit: 8256ff463eb9319f1933820a36c0838cf1e024e8
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/17/2020
ms.locfileid: "90759793"
---
# <a name="chemistry-library-installation"></a><span data-ttu-id="db7c3-103">化学库安装</span><span class="sxs-lookup"><span data-stu-id="db7c3-103">Chemistry Library Installation</span></span>

<span data-ttu-id="db7c3-104">[ **MolecularHydrogen**示例](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/MolecularHydrogen)使用手动配置的分子输入数据。</span><span class="sxs-lookup"><span data-stu-id="db7c3-104">The [**MolecularHydrogen** sample](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/MolecularHydrogen) uses molecular input data that is manually configured.</span></span>
<span data-ttu-id="db7c3-105">虽然这对小型示例而言很不错，但大规模的量程化学要求 Hamiltonians 或数十亿。</span><span class="sxs-lookup"><span data-stu-id="db7c3-105">While this is fine for small examples, quantum chemistry at scale requires Hamiltonians with millions or billions of terms.</span></span>
<span data-ttu-id="db7c3-106">此类 Hamiltonians 是由可扩展的计算化学包生成的，太大，无法手动导入。</span><span class="sxs-lookup"><span data-stu-id="db7c3-106">Such Hamiltonians, generated by scalable computational chemistry packages, are too large to import by hand.</span></span>

<span data-ttu-id="db7c3-107">用于量程开发工具包的量程化学库旨在与计算化学包一起正常工作，尤其是在太平洋西北部国家实验室，环境分子科学实验室实验室 (EMSL) 开发的 [**NWChem**](http://www.nwchem-sw.org/) 计算化学平台。</span><span class="sxs-lookup"><span data-stu-id="db7c3-107">The quantum chemistry library for the Quantum Development Kit is designed to work well with computational chemistry packages, most notably the [**NWChem**](http://www.nwchem-sw.org/) computational chemistry platform developed by the Environmental Molecular Sciences Laboratory (EMSL) at Pacific Northwest National Laboratory.</span></span>
<span data-ttu-id="db7c3-108">具体而言，Broombridge [ **Microsoft.Quantum.Chemistry**包](https://www.nuget.org/packages/Microsoft.Quantum.Chemistry)提供的工具可用于加载在[架构](xref:microsoft.quantum.libraries.chemistry.schema.broombridge)中表示的量程化学模拟问题的实例，还支持在最新版本的 NWChem 中导出。</span><span class="sxs-lookup"><span data-stu-id="db7c3-108">In particular, the [**Microsoft.Quantum.Chemistry** package](https://www.nuget.org/packages/Microsoft.Quantum.Chemistry) provides tools for loading instances of quantum chemistry simulation problems represented in the [Broombridge schema](xref:microsoft.quantum.libraries.chemistry.schema.broombridge), also supported for export by recent versions of NWChem.</span></span>

<span data-ttu-id="db7c3-109">量程开发工具包化学库还提供了一个命令行工具， `qdk-chem` 用于在旧式格式与 [Broombridge](xref:microsoft.quantum.libraries.chemistry.schema.broombridge)之间进行转换。</span><span class="sxs-lookup"><span data-stu-id="db7c3-109">The Quantum Development Kit chemistry library also provides a command-line tool, `qdk-chem`, for converting between legacy formats and [Broombridge](xref:microsoft.quantum.libraries.chemistry.schema.broombridge).</span></span>

<span data-ttu-id="db7c3-110">本部分详细介绍如何将量程开发工具包与 NWChem 和 Broombridge 一起使用，或者使用旧格式和 `qdk-chem` 。</span><span class="sxs-lookup"><span data-stu-id="db7c3-110">This section details how to use the Quantum Development Kit with either NWChem and Broombridge, or legacy formats and `qdk-chem`.</span></span>

## <a name="using-the-quantum-development-kit-with-nwchem"></a><span data-ttu-id="db7c3-111">将量程开发工具包与 NWChem 配合使用</span><span class="sxs-lookup"><span data-stu-id="db7c3-111">Using the Quantum Development Kit with NWChem</span></span>

<span data-ttu-id="db7c3-112">若要使用 NWChem 和量程开发工具包启动并运行，请使用以下方法之一：</span><span class="sxs-lookup"><span data-stu-id="db7c3-112">To get up and running using NWChem together with the Quantum Development Kit, use one of the following methods:</span></span>

- <span data-ttu-id="db7c3-113">开始使用在 [IntegralData/YAML](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/IntegralData/YAML)的示例中提供的现有 Broombridge 文件。</span><span class="sxs-lookup"><span data-stu-id="db7c3-113">Get started using existing Broombridge files provided with the samples at [IntegralData/YAML](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/IntegralData/YAML).</span></span>
- <span data-ttu-id="db7c3-114">将 [EMSL 箭头生成器用于](https://arrows.emsl.pnnl.gov/api/qsharp_chem) 作为基于 web 的前端到 NWChem 的 Microsoft Quantum Development Kit，以生成新的 Broombridge 格式化分子输入文件。</span><span class="sxs-lookup"><span data-stu-id="db7c3-114">Use the [EMSL Arrows Builder for the Microsoft Quantum Development Kit](https://arrows.emsl.pnnl.gov/api/qsharp_chem) which is a web-based frontend to NWChem, to generate new Broombridge-formated molecular input files.</span></span>  
- <span data-ttu-id="db7c3-115">使用 PNNL 提供的 [Docker 映像](https://hub.docker.com/r/nwchemorg/nwchem-qc/) 运行 NWChem，或</span><span class="sxs-lookup"><span data-stu-id="db7c3-115">Use the [Docker image](https://hub.docker.com/r/nwchemorg/nwchem-qc/) provided by PNNL to run NWChem, or</span></span>
- <span data-ttu-id="db7c3-116">[编译](http://www.nwchem-sw.org/index.php/Compiling_NWChem) 平台的 NWChem。</span><span class="sxs-lookup"><span data-stu-id="db7c3-116">[Compile NWChem](http://www.nwchem-sw.org/index.php/Compiling_NWChem) for your platform.</span></span>

<span data-ttu-id="db7c3-117">请参阅 [使用 NWChem 的端到端](xref:microsoft.quantum.chemistry.examples.endtoend) 的详细信息，了解有关如何使用 NWChem 到化学模型的详细信息，以使用量程开发套件化学库进行分析。</span><span class="sxs-lookup"><span data-stu-id="db7c3-117">See [End-to-end with NWChem](xref:microsoft.quantum.chemistry.examples.endtoend) for more information on how to work with NWChem to chemical models to analyze with the Quantum Developmen Kit chemistry library.</span></span>

### <a name="getting-started-using-broombridge-files-provided-with-the-samples"></a><span data-ttu-id="db7c3-118">使用示例提供的 Broombridge 文件入门</span><span class="sxs-lookup"><span data-stu-id="db7c3-118">Getting started using Broombridge files provided with the samples</span></span>

<span data-ttu-id="db7c3-119">量程开发工具包示例存储库中的 [IntegralData/YAML](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/IntegralData/YAML) 文件夹包含 Broombridge 格式化的分子数据文件。</span><span class="sxs-lookup"><span data-stu-id="db7c3-119">The [IntegralData/YAML](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/IntegralData/YAML) folder in the Quantum Development Kit Samples repository contains Broombridge-formated molecule data files.</span></span>  

<span data-ttu-id="db7c3-120">作为一个简单的示例，请使用化学 library 示例， [GetGateCount](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/GetGateCount) 从 Broombridge 文件之一加载 Hamiltonian，并执行量程模拟 algorigthms 的入口估计：</span><span class="sxs-lookup"><span data-stu-id="db7c3-120">As a simple example, use the chemistry library sample, [GetGateCount](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/GetGateCount) to load the Hamiltonian from one of Broombridge files and perform gate estimates of quantum simulation algorigthms:</span></span>

```bash
cd Quantum/Chemistry/GetGateCount
dotnet run -- --path=../IntegralData/YAML/h2.yaml --format=YAML
```

<span data-ttu-id="db7c3-121">有关如何输入 Broombridge 架构表示的分子的详细信息，请参阅 [从文件加载 Hamiltonian](xref:microsoft.quantum.chemistry.examples.loadhamiltonian) 。</span><span class="sxs-lookup"><span data-stu-id="db7c3-121">See [Loading a Hamiltonian from file](xref:microsoft.quantum.chemistry.examples.loadhamiltonian) for more information on how to input molecules represented by the Broombridge schema.</span></span>  

<span data-ttu-id="db7c3-122">有关资源估计的详细信息，请参阅 [获取资源计数](xref:microsoft.quantum.chemistry.examples.resourcecounts) 。</span><span class="sxs-lookup"><span data-stu-id="db7c3-122">See [Obtaining resource counts](xref:microsoft.quantum.chemistry.examples.resourcecounts) for more information on resource estimation.</span></span>  

### <a name="getting-started-using-the-emsl-arrows-builder"></a><span data-ttu-id="db7c3-123">开始使用 EMSL 箭头生成器</span><span class="sxs-lookup"><span data-stu-id="db7c3-123">Getting started using the EMSL Arrows Builder</span></span>

<span data-ttu-id="db7c3-124">EMSL 箭头是一种使用 NWChem 和化学计算数据库生成分子数据的工具。</span><span class="sxs-lookup"><span data-stu-id="db7c3-124">EMSL Arrows is a tool that uses NWChem and chemical computational databases to generate molecule data.</span></span>  <span data-ttu-id="db7c3-125">使用[Microsoft Quantum Development Kit 的 EMSL 箭头生成器](https://arrows.emsl.pnnl.gov/api/qsharp_chem)，可以使用多个分子模型生成器输入模型，并生成将由量子开发工具包使用的 Broombridge 数据文件。</span><span class="sxs-lookup"><span data-stu-id="db7c3-125">[EMSL Arrows Builder for the Microsoft Quantum Development Kit](https://arrows.emsl.pnnl.gov/api/qsharp_chem) allows you to enter your model using multiple molecular model builders and generate the Broombridge datafile to be used by the Quantum Development Kit.</span></span>  

<span data-ttu-id="db7c3-126">从 "EMSL" 页上，单击 [' China '] 选项卡，然后按照 [' 简单示例 '] 说明生成 Broombridge 文件。</span><span class="sxs-lookup"><span data-stu-id="db7c3-126">From the EMSL page, click on the ['Instuctions'] tab, and follow the ['Simple Examples'] instructions to generate Broombridge files.</span></span>  <span data-ttu-id="db7c3-127">然后尝试运行 [' GetGateCount ']，查看这些分子的量程资源估算值。</span><span class="sxs-lookup"><span data-stu-id="db7c3-127">Then try running the ['GetGateCount'] to see the quantum resource estimates for these molecules.</span></span>

### <a name="installing-nwchem-from-source"></a><span data-ttu-id="db7c3-128">从源安装 NWChem</span><span class="sxs-lookup"><span data-stu-id="db7c3-128">Installing NWChem from Source</span></span>

<span data-ttu-id="db7c3-129">[PNNL 提供](http://www.nwchem-sw.org/index.php/Compiling_NWChem)了有关如何从源安装 NWChem 的完整说明。</span><span class="sxs-lookup"><span data-stu-id="db7c3-129">Full instructions on how to install NWChem from source [are provided by PNNL](http://www.nwchem-sw.org/index.php/Compiling_NWChem).</span></span>

> [!TIP]
> <span data-ttu-id="db7c3-130">如果要从 Windows 10 使用 NWChem，适用于 Linux 的 Windows 子系统是一个不错的选择。</span><span class="sxs-lookup"><span data-stu-id="db7c3-130">If you wish to use NWChem from Windows 10, the Windows Subsystem for Linux is a great option.</span></span>
> <span data-ttu-id="db7c3-131">安装 [Ubuntu 18.04 LTS For Windows](https://www.microsoft.com/en-us/p/ubuntu-1804-lts/9n9tngvndl3q#activetab=pivot:overviewtab)后， `ubuntu18.04` 从你喜欢的终端运行并按照上面的说明从源安装 NWChem。</span><span class="sxs-lookup"><span data-stu-id="db7c3-131">Once you have installed [Ubuntu 18.04 LTS for Windows](https://www.microsoft.com/en-us/p/ubuntu-1804-lts/9n9tngvndl3q#activetab=pivot:overviewtab), run `ubuntu18.04` from your favorite terminal and follow the instructions above to install NWChem from source.</span></span>

<span data-ttu-id="db7c3-132">从源中编译 NWChem 后，可以运行 `yaml_driver` 与 NWChem 一起提供的脚本，通过 NWChem 输入卡座快速生成 Broombridge 实例：</span><span class="sxs-lookup"><span data-stu-id="db7c3-132">Once you have compiled NWChem from source, you can run the `yaml_driver` script provided with NWChem to quickly produce Broombridge instances from NWChem input decks:</span></span>

```bash
$NWCHEM_TOP/contrib/quasar/yaml_driver input.nw
```

<span data-ttu-id="db7c3-133">此命令将 `input.yaml` 在当前目录中创建 Broombridge 格式的新文件。</span><span class="sxs-lookup"><span data-stu-id="db7c3-133">This command will create a new `input.yaml` file in the Broombridge format within your current directory.</span></span>

### <a name="using-nwchem-with-docker"></a><span data-ttu-id="db7c3-134">结合使用 NWChem 和 Docker</span><span class="sxs-lookup"><span data-stu-id="db7c3-134">Using NWChem with Docker</span></span>

<span data-ttu-id="db7c3-135">使用 NWChem 的预构建映像可通过 [Docker 中心](https://hub.docker.com)跨平台使用。</span><span class="sxs-lookup"><span data-stu-id="db7c3-135">Pre-built images for using NWChem are available cross-platform via [Docker Hub](https://hub.docker.com).</span></span>
<span data-ttu-id="db7c3-136">若要开始，请遵循适用于你的平台的 Docker 安装说明：</span><span class="sxs-lookup"><span data-stu-id="db7c3-136">To get started, follow the Docker installation instructions for your platform:</span></span>

- [<span data-ttu-id="db7c3-137">安装 Docker for Ubuntu</span><span class="sxs-lookup"><span data-stu-id="db7c3-137">Install Docker for Ubuntu</span></span>](https://docs.docker.com/install/linux/docker-ce/ubuntu/)
- [<span data-ttu-id="db7c3-138">安装适用于 macOS 的 Docker</span><span class="sxs-lookup"><span data-stu-id="db7c3-138">Install Docker for macOS</span></span>](https://docs.docker.com/docker-for-mac/install/)
- [<span data-ttu-id="db7c3-139">安装用于 Windows 的 Docker 10</span><span class="sxs-lookup"><span data-stu-id="db7c3-139">Install Docker for Windows 10</span></span>](https://docs.docker.com/docker-for-windows/install/)

> [!TIP]
> <span data-ttu-id="db7c3-140">如果使用用于 Windows 的 Docker，则需要共享包含临时目录的驱动器 (通常这是 `C:\` Docker 守护程序) 的驱动器。</span><span class="sxs-lookup"><span data-stu-id="db7c3-140">If you are using Docker for Windows, you will need to share the drive containing your temporary directory (usually this is the `C:\` drive) with the Docker daemon.</span></span> <span data-ttu-id="db7c3-141">有关更多详细信息，请参阅 [Docker 文档](https://docs.docker.com/docker-for-windows/#shared-drives) 。</span><span class="sxs-lookup"><span data-stu-id="db7c3-141">See the [Docker documentation](https://docs.docker.com/docker-for-windows/#shared-drives) for more details.</span></span>

<span data-ttu-id="db7c3-142">安装 Docker 后，可以使用随量程开发工具包示例提供的 PowerShell 模块来运行映像，也可以手动运行映像。</span><span class="sxs-lookup"><span data-stu-id="db7c3-142">Once you have Docker installed, you can either use the PowerShell module provided with the Quantum Development Kit samples to run the image, or you can run the image manually.</span></span>
<span data-ttu-id="db7c3-143">此处是使用 PowerShell 的详细信息;如果希望手动使用 Docker 映像，请参阅 [随图像提供的文档](https://hub.docker.com/r/nwchemorg/nwchem-qc/)。</span><span class="sxs-lookup"><span data-stu-id="db7c3-143">We detail using PowerShell here; if you would like to use the Docker image manually, please see the [documentation provided with the image](https://hub.docker.com/r/nwchemorg/nwchem-qc/).</span></span>

#### <a name="running-nwchem-through-powershell-core"></a><span data-ttu-id="db7c3-144">通过 PowerShell Core 运行 NWChem</span><span class="sxs-lookup"><span data-stu-id="db7c3-144">Running NWChem through PowerShell Core</span></span>

<span data-ttu-id="db7c3-145">若要将 NWChem Docker 映像与量程开发工具包一起使用，我们提供了一个小型 PowerShell 模块，用于处理将文件移入和移出 NWChem 的情况。</span><span class="sxs-lookup"><span data-stu-id="db7c3-145">To use the NWChem Docker image with the Quantum Development Kit, we provide a small PowerShell module that handles moving files in and out of NWChem for you.</span></span>
<span data-ttu-id="db7c3-146">如果尚未安装 PowerShell Core，则可以从 [GitHub 上的 powershell 存储库](https://github.com/PowerShell/PowerShell#get-powershell)跨平台下载。</span><span class="sxs-lookup"><span data-stu-id="db7c3-146">If you don't already have PowerShell Core installed, you can download it cross-platform from the [PowerShell repository on GitHub](https://github.com/PowerShell/PowerShell#get-powershell).</span></span>

> [!NOTE]
> <span data-ttu-id="db7c3-147">PowerShell Core 还适用于一些示例，用于演示与数据科学和业务分析工作流的互操作性。</span><span class="sxs-lookup"><span data-stu-id="db7c3-147">PowerShell Core is also used for some samples to demonstrate interoperability with data science and business analytics workflows.</span></span>

<span data-ttu-id="db7c3-148">安装 PowerShell Core 后，导入 `InvokeNWChem.psm1` 以使 NWChem 命令在当前会话中可用：</span><span class="sxs-lookup"><span data-stu-id="db7c3-148">Once you have PowerShell Core installed, import `InvokeNWChem.psm1` to make NWChem commands available in your current session:</span></span>

```powershell
cd Quantum/utilities/
Import-Module ./InvokeNWChem.psm1
```

<span data-ttu-id="db7c3-149">这会使 `Convert-NWChemToBroombridge` 命令在当前 PowerShell 会话中可用。</span><span class="sxs-lookup"><span data-stu-id="db7c3-149">This will make the `Convert-NWChemToBroombridge` command available in your current PowerShell session.</span></span>
<span data-ttu-id="db7c3-150">若要从 Docker 下载任何所需的映像并将其用于运行 NWChem input 卡座并将输出捕获到 Broombridge，请运行以下内容：</span><span class="sxs-lookup"><span data-stu-id="db7c3-150">To download any needed images from Docker and use them to run NWChem input decks and capture output to Broombridge, run the following:</span></span>

```powershell
Convert-NWChemToBroombridge ./input.nw
```

<span data-ttu-id="db7c3-151">这将通过在上运行 NWChem 来创建 Broombridge 文件 `input.nw` 。</span><span class="sxs-lookup"><span data-stu-id="db7c3-151">This will create a Broombridge file by running NWChem on `input.nw`.</span></span>
<span data-ttu-id="db7c3-152">默认情况下，Broombridge 输出将与输入纸盒具有相同的名称和路径，并将 `.nw` 扩展名替换为 `.yaml` 。</span><span class="sxs-lookup"><span data-stu-id="db7c3-152">By default, the Broombridge output will have the same name and path as the input deck, with the `.nw` extension replaced by `.yaml`.</span></span>
<span data-ttu-id="db7c3-153">可以使用参数将其重写 `-DestinationPath` `Convert-NWChemToBroombridge` 。</span><span class="sxs-lookup"><span data-stu-id="db7c3-153">This can be overridden by using the `-DestinationPath` parameter to `Convert-NWChemToBroombridge`.</span></span>
<span data-ttu-id="db7c3-154">可以使用 PowerShell 的内置帮助功能获取详细信息：</span><span class="sxs-lookup"><span data-stu-id="db7c3-154">More information can be obtained by using PowerShell's built-in help functionality:</span></span>

```powershell
Convert-NWChemToBroombridge -?
Get-Help Convert-NWChemToBroombridge -Full
```

## <a name="using-the-quantum-development-kit-with-qdk-chem"></a><span data-ttu-id="db7c3-155">使用量子开发工具包 `qdk-chem`</span><span class="sxs-lookup"><span data-stu-id="db7c3-155">Using the Quantum Development Kit with `qdk-chem`</span></span>

<span data-ttu-id="db7c3-156">若要安装 `qdk-chem` ，你可以在命令行中使用 .NET Core SDK：</span><span class="sxs-lookup"><span data-stu-id="db7c3-156">To install `qdk-chem`, you can use the .NET Core SDK at the command line:</span></span>

```dotnetcli
dotnet tool install --global Microsoft.Quantum.Chemistry.Tools
```

<span data-ttu-id="db7c3-157">安装后 `qdk-chem` ，可以使用 `--help` 选项获取有关该工具提供的功能的更多详细信息 `qdk-chem` 。</span><span class="sxs-lookup"><span data-stu-id="db7c3-157">Once you have installed `qdk-chem`, you can use the `--help` option to get more details about the functionality offered by the `qdk-chem` tool.</span></span>

<span data-ttu-id="db7c3-158">若要转换为 Broombridge，可以使用 `qdk-chem convert` 命令：</span><span class="sxs-lookup"><span data-stu-id="db7c3-158">To convert to and from Broombridge, you can use the `qdk-chem convert` command:</span></span>

```
qdk-chem convert --from fcidump --to broombridge data.fcidump --out data.yml
```

<span data-ttu-id="db7c3-159">该 `qdk-chem convert` 命令还可以接受其来自标准输入的数据，并可以写入标准输出; 这在脚本中尤其有用，并且与导出为旧格式的工具集成。</span><span class="sxs-lookup"><span data-stu-id="db7c3-159">The `qdk-chem convert` command can also accept its data from standard input, and can write to standard output; this is especially useful within scripts and for integrating with tools that export to legacy formats.</span></span>
<span data-ttu-id="db7c3-160">例如，在 Bash 中执行以下代码：</span><span class="sxs-lookup"><span data-stu-id="db7c3-160">For example, in Bash:</span></span>

```bash
cat data.fcidump | qdk-convert --from fcidump --to broombridge - > data.yml
```
